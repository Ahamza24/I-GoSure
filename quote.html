<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>I-GoSure - Get Your Quotation</title>
    <meta content="" name="description">
    <meta content="" name="keywords">


      <!-- Google Fonts -->
      <link
        href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
        rel="stylesheet">

        <!-- Vendor CSS Files -->
        <link href="assets/vendor/aos/aos.css" rel="stylesheet">
        <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
        <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
        <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
     

      <!-- Template Main CSS File -->
      <link href="assets/css/style.css" rel="stylesheet">
        
       <!-- Firebase scripts -->
        <script src="https://js.stripe.com/v3/"></script>
        <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js"></script>
        <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js"></script>
  </head>
  <body>
      <header id="header" class="fixed-top d-flex align-items-center">
        <div class="container d-flex align-items-center justify-content-between">
    
          <div class="logo">
            <a href="index.html" style="background-color: transparent;" ><img src="assets\img\i-gosure-high-resolution-logo-transparent.png" alt="Your Logo" href="index.html"></a>
            <!-- Uncomment below if you prefer to use an image logo -->
            <!-- <a href="index.html"><img src="assets/img/logo.png" alt="" class="img-fluid"></a>-->
          </div>
    
          <nav id="navbar" class="navbar">
            <ul>
              <li><a class="nav-link scrollto active" href="index.html">Home</a></li>
              <li><a class="nav-link scrollto" href="service.html">Services</a></li>
              <li><a class="nav-link scrollto " href="feature.html">Features</a></li>
              <li><a class="nav-link scrollto" href="Quote.html">Quotes</a></li>
              <li><a class="nav-link scrollto" href="contactus.html">Contact Us</a></li>
              <li><a class="getstarted scrollto" href="Quote.html">Get a Quote</a></li>   
            </ul>
            <i class="bi bi-list mobile-nav-toggle"></i>
          </nav><!-- .navbar -->
    
        </div>
      </header><!-- End Header -->
     
        <div class="logo">
          <img src="assets/img/filler.png" alt="Your Logo">
           <!-- Uncomment below if you prefer to use an image logo -->
           <!-- <a href="index.html"><img src="assets/img/logo.png" alt="" class="img-fluid"></a>-->
        </div>
        
      <h1>Car Insurance Quotation</h1>
      <form id="quotationForm" onsubmit="event.preventDefault()">
        <label for="registration">Enter Registration Number:</label>
        <input style="background-color: #F9C038; max-width: 300px; text-size-adjust: 10px;" type="text" id="registrationNumber" placeholder="ENTER REG">
        <span style="color: #fff;">-----------------------------------</span>
        <button style="max-width: 300px;" type="button" onclick="handlePaymentAndGeneratePDF(document.getElementById('registrationNumber').value)">Get Quotation</button>
      </form>
      
      <!-- Add placeholders for car details -->
      <div id="car-details">
        <script>
          console.log('randomPart: ', ''.randomPart(5));
        </script>
        <h2>Car Details:</h2>
        <p>Make: <span id="car-make"></span></p>
        <p>Model: <span id="car-model"></span></p>
        <p>Year: <span id="car-year"></span></p>
      </div>
      
      <form id="paymentForm">
        <h2>Enter Personal Details and Proceed to Payment</h2>
        <div id="quotationAmount"></div>
    
        <label for="cardHolder">Cardholder Name:</label>
        <input type="text" id="cardHolder" name="cardHolder" required>
    
        <label for="cardElement">Card Details:</label>
        <div id="cardElement"></div>
        <div id="card-errors" role="alert"></div>
    
        <button style="background-color: #3498db;" type="button" onclick="processPayment()">Proceed to Payment</button>
    </form>
    
      
      <!-- Include your JavaScript code here 
      <script>
          // Function to check registration and display car details
          async function checkRegistration() {
              const registrationNumber = document.getElementById('registration').value;
      
              try {
                  const carDetails = await checkRegistration(registrationNumber);
                  // Display car details (update this based on your UI)
                  document.getElementById('carDetails').innerHTML = JSON.stringify(carDetails, null, 2);
      
                  // Show the payment form
                  document.getElementById('paymentForm').style.display = 'block';
      
                  // Display the quotation amount (you may fetch this from the server)
                  document.getElementById('quotationAmount').innerHTML = 'Quotation Amount: $XXX'; // Replace with actual amount
              } catch (error) {
                  console.error('Error checking registration:', error.message);
                  // Handle error on the UI
              }
          }
      
          // Function to process payment and generate PDF
          async function processPayment() {
              const registrationNumber = document.getElementById('registration').value;
              const fullName = document.getElementById('fullName').value;
              const email = document.getElementById('email').value;
      
              try {
                  // Generate insurance quote and claim number
                  const { quoteID, claimNumber } = await generateInsuranceQuote(registrationNumber, amount);
      
                  // Assuming you have a function to handle payment with Stripe on your UI
                  const token = await handleStripePayment();
      
                  // After successful payment, store personal details and car details
                  if (token) {
                      await storePersonalDetails(registrationNumber, { fullName, email });
                      const carDetails = await checkRegistration(registrationNumber);
                      await storeCarDetails(registrationNumber, carDetails);
      
                      // Generate PDF
                      const pdfContent = `Welcome to I-GoSure Insurance. Your claim number is: ${claimNumber}`;
                      generateAndSendPDF(pdfContent, email);
      
                      // You can also update the UI to show that the process is complete
                      console.log('Process completed successfully!');
                  }
              } catch (error) {
                  console.error('Error processing payment:', error.message);
                  // Handle error on the UI
              }
          }
      </script>-->


        <div class="logo">
          <img src="assets/img/filler.png" alt="Your Logo">
           <!-- Uncomment below if you prefer to use an image logo -->
           <!-- <a href="index.html"><img src="assets/img/logo.png" alt="" class="img-fluid"></a>-->
        </div>


 <!-- Template Main JS File -->
 <script src="assets/js/main.js"></script>
 


  </body>



             <!-- Vendor JS Files -->
             <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
             <script src="assets/vendor/aos/aos.js"></script>
             <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
             <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
             <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
             <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
             <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- ======= Footer ======= -->
    <footer id="footer">
      <div class="container">
      <div class="row d-flex align-items-center">
        <div class="col-lg-6 text-lg-left text-center">
          <div class="copyright">
            &copy; Copyright <strong>I-GoSure</strong>. All Rights Reserved
          </div>
          <div class="credits">
            <!-- All the links in the footer should remain intact. -->
            <!-- You can delete the links only if you purchased the pro version. -->
            <!-- Licensing information: https://bootstrapmade.com/license/ -->
            <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/vesperr-free-bootstrap-template/ -->
            Designed by <a href="index.html">I-GoSure</a>
          </div>
        </div>
        <div class="col-lg-6">
          <nav class="footer-links text-lg-right text-center pt-2 pt-lg-0">
            <a href="index.html" class="scrollto">Home</a>
            <a href="#about" class="scrollto">About</a>
            <a href="Quote.html" class="scrollto">Get your Quotation</a>
            <a href="policydoc.html">Privacy Policy</a>
            <a href="subcriptionproof.html">Policy Validator</a>
          </nav>
        </div>
      </div>
      </div>
    </footer><!-- End Footer -->

</html>
